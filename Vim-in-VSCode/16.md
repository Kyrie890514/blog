---
outline: deep
---

# 宏操作

通过之前的学习，我们知道可以使用 `.` 重复上一个操作，使用 `;` 和 `,` 重复上一次单字符搜索，使用 `n` 和 `N` 重复上一次搜索，使用 `@:` 和 `@@` 重复执行上一个命令(Command-line mode)；而在本章，我们将会学习如何录制一系列的操作并回放(重新执行一遍这些操作)，这个功能叫做宏操作。

## 语法

1. `q{register}`: 开始录制并存入寄存器 {register}，{register} 可以是 a-z 中的一个字母。例如，`qq` 会将录制的内容存入寄存器 q 中。注意，开始录制后，下方状态栏的左侧会出现类似 `Recording @q` 的标志。

2. 执行一些需要被录制的操作

3. `q`: 结束录制，此时下方状态栏左侧的 `Recording @q` 标志消失。

录制完成后，我们就可以回放(replay)它，即重新执行一遍录制的操作。

- `@{register}`: 执行存于寄存器 {register} 的操作，例如 `@q` 会执行刚刚使用 `qq` 录制的操作

与重复执行 Command-line mode 的命令一样，在执行一次后，可以使用 `@@` 再次执行。
