---
outline: deep
---

# 操作

在上面两章我们了解了如何在 Normal mode 下快速移动光标，移动的目的是对内容进行修改，除了进入 Insert mode 修改，我们还可以直接在 Normal mode 下进行一些操作，这会在本章介绍。

## 语法

通常来说，我们会使用位于键盘右上角的 `Backspace` 键来进行删除操作，当我很讨厌这个按键，因为每次使用都要将右手离开主键盘区；在 Vim 中，我们可以使用 `d` 来进行删除操作。

操作即 operator，其基本语法为：

- `{operator}{motion}`

- `{operator}{count}{motion}`

- `{count}{operator}{motion}`

也就是说，我们可以使用 `dl` 删除右边 1 个字符，使用 `d5l` 或 `5dl` 删除右边 5 个字符。

下面是一些常用的组合：

- `d2w`: 删除后面两个 word

- `d5j`: 向下删除 5 行

- `dt(`: 删除当前光标到下一个 `(` 之间的内容

- `df(`: 删除当前光标到下一个 `(` 之间的内容，包含 `(`

- `d$`: 删除当前光标到该行末尾的内容

- `d^`: 删除当前光标到该行开头的内容

> 我个人不建议在 Vim 中频繁的使用 {count}，因为数数本身是一个效率低下的过程，会增加心智负担，打断思维的流畅性。

## 常用操作

下面是一些 Vim 中常用的操作(operator)，均可结合上面的语法使用。

- `c`: 删除相应的内容并进入 Insert mode，相当于在 `d` 操作后按下 `i`

- `y`: 复制

- `p`: 粘贴

- `g~`: 切换大小写

- `gu`: 切换至小写

- `gU`: 切换至大写

- `>`: 将当前行右移，增加缩进

- `<`: 将当前行左移，减少缩进

- `=`: 格式化代码

> 默认情况下在 Vim 中无法使用系统的剪贴板，这对复制粘贴操作不是很友好，我们需要增加下面的配置。
>
> ```json
> "vim.useSystemClipboard": true
> ```

## shorthand

除了上面提到的语法，Vim 还提供了一些更加简略的用法。

### double

连续按两下操作的按键，相当于对行进行相应的操作。

- `dd`: 删除光标所在行

- `cc`: 删除光标所在行并进入 Insert mode

- `yy`: 复制光标所在行

- `g~~`: 切换光标所在行所有字符的大小写

- `guu`: 切换光标所在行所有字符至小写

- `gUU`: 切换光标所在行所有字符至大写

- `>>`: 将当前行右移，增加缩进

- `<<`: 将当前行左移，减少缩进

- `==`: 格式化光标所在行的代码

### capitalize

除此之外，这些操作的大写按键也有不同的意义。

- `D`: 删除当前光标到该行末尾的内容

- `C`: 删除当前光标到该行末尾的内容并进入 Insert mode

- `Y`: 复制光标所在行，相当于 `yy`

- `P`: 在当前光标前面粘贴

### character

针对单个字符的修改，有更加简便的操作方式。

- `x`: 删除光标所在的字符，相当于 `dl`

- `X`: 删除光标所在的前一个字符，相当于 `dh`

- `r{character}`: 将光标所在的字符替换成 \{character}

- `~`: 切换光标所在字符的大小写

## 撤销和重做

- `u`: 撤销上一次修改操作

- `<Ctrl-r>`: 恢复上一次的撤销
